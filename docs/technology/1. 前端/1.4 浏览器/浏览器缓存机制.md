## 缓存位置
从缓存位置上来说分为四种，并且各自有优先级，当依次查找缓存且都没有命中的时候，才会去请求网络。
* Service Worker
* Memory Cache
* Disk Cache
* Push Cache

### 1. Service Worker

*参考*：

* https://www.zhangxinxu.com/wordpress/2017/07/service-worker-cachestorage-offline-develop/

Service Worker 是运行在浏览器背后的独立 Worker 线程，一般可以用来实现缓存功能。使用 Service Worker的话，传输协议必须为 HTTPS。因为 Service Worker 中涉及到请求拦截，所以必须使用 HTTPS 协议来保障安全。Service Worker 的缓存与浏览器其他内建的缓存机制不同，它可以让我们自由控制缓存哪些文件、如何匹配缓存、如何读取缓存，并且缓存是持续性的。


1.Memory Cache
内存缓存是一种比较特殊的缓存，他不受max-age、no-cache等配置的影响，即使我们不设置缓存，如果当前的内存空间比较充裕的话，一些资源还是会被缓存下来。但这种缓存是暂时的，一旦关闭了浏览器，这一部分用于缓存的内存空间就会被释放掉。如果真的不想使用缓存，可以设置 Cache-Control: no-store，这样，即便是内存缓存，也不会生效。
（注意：这部分内存空间在浏览器关闭时才会释放，仅关闭tab不会释放，所以关闭‘baidu.com’的tab，在另一个tab再打开‘baidu.com’依然会从加载缓存）
内存缓存虽然比较高效，但还是受限于计算机内存的大小，所以能让我们使用的内存并不多，这个时候就需要硬盘来存储大量的缓存。


2.Disk Cache
Disk Cache 也就是存储在硬盘中的缓存。相比较内存缓存的优势就是长时效。
它会根据HTTP Header中设置的字段类型，来判断资源是否需要重新请求。
如果当前内存使用率高的话，请求资源大概率会被缓存到disk cache。


用户行为对浏览器缓存的影响

所谓用户行为对浏览器缓存的影响，指的就是用户在浏览器如何操作时，会触发怎样的缓存策略。主要有 3 种：

* 打开网页，地址栏输入地址： 查找 disk cache 中是否有匹配。如有则使用；如没有则发送网络请求。
* 普通刷新 (F5)：因为 TAB 并没有关闭，因此 memory cache 是可用的，会被优先使用(如果匹配的话)，其次才是 disk cache。
* 强制刷新 (Ctrl + F5)：浏览器不使用缓存，因此发送的请求头部均带有 Cache-control: no-cache(为了兼容，还带了 Pragma: no-cache)，服务器直接返回 200 和最新内容。