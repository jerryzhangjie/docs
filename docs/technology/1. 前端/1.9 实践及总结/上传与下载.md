## 文件上传

### 第一种：form 表单上传

        <form action='/ajax/upload' enctype="multipart/form-data" type='post' target='uploader'>
        　　<input type='file'>
        　　<input type='hidden' name='userid' value='123'>
        　　<input type='hidden' name='username' value='abc'>
        　　<input type='submit' value='Submit'>
        </form>
        <iframe id='uploader'></iframe>

小技巧：为 form 设置 target='xxx'，xxx 与空 iframe 的id一致，可以避免表单提交后刷新页面。

### 第二种：FormData + ajax 上传

        <input type='file' id='file'>
        <input type='button' onclick='handleSubmit()'>

        function handleSubmit() {
            const file = document.getElementById('file').files[0]   // blob 数据，即二进制大数据
            const formData = new FormData()
            formData.append('userid', '123')
            formData.append('file', file)
            // ajax post 发送
            const xhr = new XMLHttpRequest()
        　　xhr.open('POST', '/ajax/upload')
        　　xhr.onload = function () {
        　　　　if (xhr.status === 200) {
        　　　　　　console.log('上传成功');
        　　　　} else {
        　　　　　　console.log('出错了');
        　　　　}
        　　};
        　　xhr.send(formData)
        }

### 第三种：利用 H5 的 FileReader 上传

        <div id='preview'></div>
        <input type='file' id='file'>
        <input type='button' onclick='handleSubmit()'>

        function handleSubmit() {
            const file = document.getElementById('file').files[0]   // blob 数据，即二进制大数据
            const reader = new FileReader()
            reader.readAsDataURL(file)
            reader.onload = function(e) {
                const data = e.target.result    // base64 数据，假如该文件为图片，此时拿到上传的数据后就可以做预览功能了
                // 图片预览
                document.getElementById('preview').
                // ajax post 发送
                const xhr = new XMLHttpRequest()
            　　xhr.open('POST', '/ajax/upload')
            　　xhr.onload = function () {
            　　　　if (xhr.status === 200) {
            　　　　　　console.log('上传成功');
            　　　　} else {
            　　　　　　console.log('出错了');
            　　　　}
            　　};
            　　xhr.send(data)
            }
        }