<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>从哪些方面入手，进行前端性能优化？ | 能量蓄水池</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/docs/favicon.svg">
    <meta name="description" content="学习笔记、知识文档、经验总结、生活杂记。">
    
    <link rel="preload" href="/docs/assets/css/0.styles.767e998a.css" as="style"><link rel="preload" href="/docs/assets/js/app.574fc7ba.js" as="script"><link rel="preload" href="/docs/assets/js/2.438c9cc2.js" as="script"><link rel="preload" href="/docs/assets/js/73.2d73f227.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.782efd2f.js"><link rel="prefetch" href="/docs/assets/js/11.9a017d0a.js"><link rel="prefetch" href="/docs/assets/js/12.8c3fe05c.js"><link rel="prefetch" href="/docs/assets/js/13.32b8501e.js"><link rel="prefetch" href="/docs/assets/js/14.7cbead99.js"><link rel="prefetch" href="/docs/assets/js/15.5ca6d375.js"><link rel="prefetch" href="/docs/assets/js/16.7b1d893e.js"><link rel="prefetch" href="/docs/assets/js/17.8243e47c.js"><link rel="prefetch" href="/docs/assets/js/18.f795c9b4.js"><link rel="prefetch" href="/docs/assets/js/19.e16fd372.js"><link rel="prefetch" href="/docs/assets/js/20.12825b32.js"><link rel="prefetch" href="/docs/assets/js/21.d2e3ba19.js"><link rel="prefetch" href="/docs/assets/js/22.a091a3f3.js"><link rel="prefetch" href="/docs/assets/js/23.1829b4d2.js"><link rel="prefetch" href="/docs/assets/js/24.41ea6154.js"><link rel="prefetch" href="/docs/assets/js/25.d944d918.js"><link rel="prefetch" href="/docs/assets/js/26.f9ba23ac.js"><link rel="prefetch" href="/docs/assets/js/27.33228142.js"><link rel="prefetch" href="/docs/assets/js/28.cc4b94e6.js"><link rel="prefetch" href="/docs/assets/js/29.e183b477.js"><link rel="prefetch" href="/docs/assets/js/3.ce6400d4.js"><link rel="prefetch" href="/docs/assets/js/30.f2b86e7a.js"><link rel="prefetch" href="/docs/assets/js/31.75faa4ac.js"><link rel="prefetch" href="/docs/assets/js/32.1813d3da.js"><link rel="prefetch" href="/docs/assets/js/33.c64ac273.js"><link rel="prefetch" href="/docs/assets/js/34.d54f07d6.js"><link rel="prefetch" href="/docs/assets/js/35.c6b17c27.js"><link rel="prefetch" href="/docs/assets/js/36.93273509.js"><link rel="prefetch" href="/docs/assets/js/37.f4f46233.js"><link rel="prefetch" href="/docs/assets/js/38.fa9900ec.js"><link rel="prefetch" href="/docs/assets/js/39.3b24b23d.js"><link rel="prefetch" href="/docs/assets/js/4.9b8751d4.js"><link rel="prefetch" href="/docs/assets/js/40.5728cc60.js"><link rel="prefetch" href="/docs/assets/js/41.9e47e643.js"><link rel="prefetch" href="/docs/assets/js/42.2cd430a0.js"><link rel="prefetch" href="/docs/assets/js/43.0e9a4cd9.js"><link rel="prefetch" href="/docs/assets/js/44.ec5e25b6.js"><link rel="prefetch" href="/docs/assets/js/45.4cdd4bf1.js"><link rel="prefetch" href="/docs/assets/js/46.b8a5de46.js"><link rel="prefetch" href="/docs/assets/js/47.544a1352.js"><link rel="prefetch" href="/docs/assets/js/48.75ab366d.js"><link rel="prefetch" href="/docs/assets/js/49.59e58f04.js"><link rel="prefetch" href="/docs/assets/js/5.6d67c780.js"><link rel="prefetch" href="/docs/assets/js/50.96ea067f.js"><link rel="prefetch" href="/docs/assets/js/51.144bb382.js"><link rel="prefetch" href="/docs/assets/js/52.8d9aac06.js"><link rel="prefetch" href="/docs/assets/js/53.06e2c5d4.js"><link rel="prefetch" href="/docs/assets/js/54.2d17b229.js"><link rel="prefetch" href="/docs/assets/js/55.7cda8245.js"><link rel="prefetch" href="/docs/assets/js/56.133756ab.js"><link rel="prefetch" href="/docs/assets/js/57.74959c99.js"><link rel="prefetch" href="/docs/assets/js/58.18ff2b44.js"><link rel="prefetch" href="/docs/assets/js/59.b35de2b8.js"><link rel="prefetch" href="/docs/assets/js/6.c3ae577d.js"><link rel="prefetch" href="/docs/assets/js/60.39380f27.js"><link rel="prefetch" href="/docs/assets/js/61.48b5f2aa.js"><link rel="prefetch" href="/docs/assets/js/62.c62037f3.js"><link rel="prefetch" href="/docs/assets/js/63.a439b062.js"><link rel="prefetch" href="/docs/assets/js/64.c24f247a.js"><link rel="prefetch" href="/docs/assets/js/65.e1fa1286.js"><link rel="prefetch" href="/docs/assets/js/66.313ff872.js"><link rel="prefetch" href="/docs/assets/js/67.b8bfc1ca.js"><link rel="prefetch" href="/docs/assets/js/68.f81bf7a5.js"><link rel="prefetch" href="/docs/assets/js/69.c420ebd2.js"><link rel="prefetch" href="/docs/assets/js/7.5229be7a.js"><link rel="prefetch" href="/docs/assets/js/70.f4bec417.js"><link rel="prefetch" href="/docs/assets/js/71.40db7b8a.js"><link rel="prefetch" href="/docs/assets/js/72.f297dce6.js"><link rel="prefetch" href="/docs/assets/js/74.735fb235.js"><link rel="prefetch" href="/docs/assets/js/75.50f07148.js"><link rel="prefetch" href="/docs/assets/js/76.89a73abf.js"><link rel="prefetch" href="/docs/assets/js/77.66ba0d1e.js"><link rel="prefetch" href="/docs/assets/js/78.81c41079.js"><link rel="prefetch" href="/docs/assets/js/79.14a4fcbf.js"><link rel="prefetch" href="/docs/assets/js/8.30d4ce7d.js"><link rel="prefetch" href="/docs/assets/js/80.af5d096b.js"><link rel="prefetch" href="/docs/assets/js/81.4eccd1c7.js"><link rel="prefetch" href="/docs/assets/js/82.d069817a.js"><link rel="prefetch" href="/docs/assets/js/83.495cd329.js"><link rel="prefetch" href="/docs/assets/js/84.9489494e.js"><link rel="prefetch" href="/docs/assets/js/85.e4406d55.js"><link rel="prefetch" href="/docs/assets/js/86.71cff966.js"><link rel="prefetch" href="/docs/assets/js/87.5eba7956.js"><link rel="prefetch" href="/docs/assets/js/88.6670820c.js"><link rel="prefetch" href="/docs/assets/js/89.cc537610.js"><link rel="prefetch" href="/docs/assets/js/9.99b7e418.js"><link rel="prefetch" href="/docs/assets/js/90.6ccfe07d.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.767e998a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><img src="/docs/favicon.svg" alt="能量蓄水池" class="logo"> <span class="site-name can-hide">能量蓄水池</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/docs/about/" class="nav-link">
  关于
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术" class="dropdown-title"><span class="title">技术</span> <span class="arrow down"></span></button> <button type="button" aria-label="技术" class="mobile-dropdown-title"><span class="title">技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/technology/1. 前端/" class="nav-link">
  前端
</a></li><li class="dropdown-item"><!----> <a href="/docs/technology/2. 服务端/" class="nav-link">
  服务端
</a></li><li class="dropdown-item"><!----> <a href="/docs/technology/3. 其它/" class="nav-link">
  其它
</a></li></ul></div></div><div class="nav-item"><a href="/docs/life/" class="nav-link">
  生活杂记
</a></div><div class="nav-item"><a href="/docs/other/" class="nav-link">
  其它
</a></div> <a href="https://github.com/jerryzhangjie/docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/docs/about/" class="nav-link">
  关于
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术" class="dropdown-title"><span class="title">技术</span> <span class="arrow down"></span></button> <button type="button" aria-label="技术" class="mobile-dropdown-title"><span class="title">技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/technology/1. 前端/" class="nav-link">
  前端
</a></li><li class="dropdown-item"><!----> <a href="/docs/technology/2. 服务端/" class="nav-link">
  服务端
</a></li><li class="dropdown-item"><!----> <a href="/docs/technology/3. 其它/" class="nav-link">
  其它
</a></li></ul></div></div><div class="nav-item"><a href="/docs/life/" class="nav-link">
  生活杂记
</a></div><div class="nav-item"><a href="/docs/other/" class="nav-link">
  其它
</a></div> <a href="https://github.com/jerryzhangjie/docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>1.1 基础 - ECMAScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>1.2 基础 - CSS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>1.3 基础 - HTML</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>1.4 浏览器</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>1.5 网络</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>1.6 设计模式</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>1.7 算法</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>1.8 框架</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>1.9 实践及总结</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/technology/1. 前端/1.9 实践及总结/favicon相关.html" class="sidebar-link">favicon相关</a></li><li><a href="/docs/technology/1. 前端/1.9 实践及总结/Fiddler.html" class="sidebar-link">Fiddler</a></li><li><a href="/docs/technology/1. 前端/1.9 实践及总结/上传与下载.html" class="sidebar-link">上传与下载</a></li><li><a href="/docs/technology/1. 前端/1.9 实践及总结/前端性能优化.html" class="active sidebar-link">前端性能优化</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/technology/1. 前端/1.9 实践及总结/前端性能优化.html#从哪些方面入手-进行前端性能优化" class="sidebar-link">从哪些方面入手，进行前端性能优化？</a></li></ul></li><li><a href="/docs/technology/1. 前端/1.9 实践及总结/实时刷新实现方案.html" class="sidebar-link">实时刷新实现方案</a></li><li><a href="/docs/technology/1. 前端/1.9 实践及总结/实现多个标签页通信的方式.html" class="sidebar-link">实现多个标签页通信的方式</a></li><li><a href="/docs/technology/1. 前端/1.9 实践及总结/性能优化.html" class="sidebar-link">性能优化</a></li><li><a href="/docs/technology/1. 前端/1.9 实践及总结/结合场景理解节流和防抖.html" class="sidebar-link">结合场景理解节流和防抖</a></li><li><a href="/docs/technology/1. 前端/1.9 实践及总结/记一次性能优化.html" class="sidebar-link">记一次性能优化</a></li><li><a href="/docs/technology/1. 前端/1.9 实践及总结/记一次性能排查及解决方案.html" class="sidebar-link">记一次性能排查及解决方案</a></li><li><a href="/docs/technology/1. 前端/1.9 实践及总结/跨域及解决方案汇总.html" class="sidebar-link">跨域及解决方案汇总</a></li><li><a href="/docs/technology/1. 前端/1.9 实践及总结/页面埋点实践.html" class="sidebar-link">页面埋点实践</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>1.10 工程化</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>1.11 Other</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="从哪些方面入手-进行前端性能优化"><a href="#从哪些方面入手-进行前端性能优化" class="header-anchor">#</a> 从哪些方面入手，进行前端性能优化？</h2> <p>主要从CRP（关键渲染路径）为主线，进行分析可优化的点。</p> <p>从url输入，到浏览器渲染出页面内容的关键环节，称为<strong>关键渲染路径</strong></p> <p>URI解析 ——&gt; DNS解析 ——&gt; TCP三次握手建立连接发送http请求 ——&gt; 服务端处理和响应 ——&gt; 浏览器解析和渲染 ——&gt; TCP四次挥手断开连接</p> <h3 id="_1-减少请求"><a href="#_1-减少请求" class="header-anchor">#</a> 1. 减少请求</h3> <p>减少请求又可分为两方面：</p> <ol><li><strong>减少请求数</strong>，方法：资源合并(js、css、雪碧图)、图片转base64等；</li> <li><strong>减少请求大小</strong>，方法：1. 资源压缩，例如开启gzip(一般是由apache、tomcat等web服务器开启)；2. 减少传递不必要的字段，例如静态资源无需携带cookie，可以通过多域名实现(因为同域名才会自动携带cookie)(是否还有其它不携带cookie的方法？)
但二者有时是互斥的，比如说资源合并后，导致文件过大，此时还要考虑通过webpack等构建工具进行代码拆分、异步加载模块等操作；</li></ol> <h3 id="_2-利用缓存"><a href="#_2-利用缓存" class="header-anchor">#</a> 2. 利用缓存</h3> <ol><li><strong>代码版本化</strong></li> <li><strong>浏览器本地存储</strong></li> <li><strong>http缓存</strong></li></ol> <h3 id="_3-利用cdn"><a href="#_3-利用cdn" class="header-anchor">#</a> 3. 利用CDN</h3> <p>CDN全称Content Delivery Network，即内容分发网络，指通过互联网与各种缓存服务器（基于IDC）相连的网络系统。CDN是用来给网站加速的。用户请求CDN资源时，利用全局负载技术，将访问指向距离最近的工作正常的缓存服务器上，由缓存服务器直接响应用户请求。<br>
CDN的原理就是利用全局负载技术就近请求缓存服务器上的资源，减少网络耗时。</p> <h3 id="_4-利用ssr-server-side-render-服务器端渲染"><a href="#_4-利用ssr-server-side-render-服务器端渲染" class="header-anchor">#</a> 4. 利用SSR(server side render，服务器端渲染)</h3> <p>原理时，将数据在服务端插入到html节点中，然后再返回给浏览器，从而减少ajax等数据接口的请求数。比如<code>php</code>语言的<code>smarty</code>语法。目前Vue、React都有这个技术概念。</p> <h3 id="_5-懒加载"><a href="#_5-懒加载" class="header-anchor">#</a> 5. 懒加载</h3> <ol><li><strong>交互懒加载</strong>，例如，只请求、渲染首屏资源，下拉时再加载更多资源；默认加载很小的图，点击后才会加载高清图。</li> <li><strong>延迟懒加载</strong></li></ol> <h3 id="_6-代码层面-最主要减少dom操作"><a href="#_6-代码层面-最主要减少dom操作" class="header-anchor">#</a> 6. 代码层面(最主要减少dom操作)</h3> <p>首先明确，为什么 dom 操作很耗性能？</p> <ol><li>线程切换(渲染引擎线程、js引擎线程)；</li> <li>重排和重绘。</li></ol> <p>如何减少dom操作？</p> <ol><li><strong>缓存dom查询</strong>，例如，for循环遍历所有li时，先定义长度变量，再循环；</li> <li><strong>合并dom插入</strong>，先拼接dom字符串，再一次性插入父节点；</li> <li><strong>事件节流</strong></li> <li><strong>尽早操作</strong>，例如，条件判断时，提前<code>return</code>；正确的时机执行代码<code>DOMContentLoaded</code>(dom渲染完即执行)<code>onload</code>(全部资源加载完才执行)</li></ol> <p>html结构简洁、css层级不要过多，原因：</p> <ol><li>CSSOM匹配DOM生成渲染树，是一个相当复杂和消耗性能的过程；</li> <li>css是从后向前匹配的。</li></ol> <h3 id="other"><a href="#other" class="header-anchor">#</a> Other</h3> <ol><li><p>script 标签：调整加载顺序提升渲染速度</p> <ul><li>async 属性。立即请求文件，但不阻塞渲染引擎，而是文件加载完毕后阻塞渲染引擎并立即执行文件内容。会在load事件之前执行，不能确保与DOMContentLoaded的执行先后顺序。适用于独立不依赖其它模块的代码，或者需要js尽早做些事情的情况，例如进入页面立马发送一个请求，此时script async可以放在head标签中。</li> <li>defer 属性。立即请求文件，但不阻塞渲染引擎，等到解析完 HTML 之后再执行文件内容。会在DOMContentLoaded和load事件之前执行。适用于存在依赖关系的模块。</li> <li>HTML5 标准 type 属性，对应值为“module”。让浏览器按照 ECMA Script 6 标准将文件当作模块进行解析，默认阻塞效果同 defer，也可以配合 async 在请求完成后立即执行。</li></ul> <p><img src="https://gitee.com/jerry-zhang/image-database/raw/master/img/Ciqc1F647iiAZx3cAAB1ewBzlh0431.png" alt=""></p></li> <li><p>link 标签：通过预处理提升渲染速度</p> <ul><li>dns-prefetch。当 link 标签的 rel 属性值为“dns-prefetch”时，浏览器会对某个域名预先进行 DNS 解析并缓存。这样，当浏览器在请求同域名资源的时候，能省去从域名查询 IP 的过程，从而减少时间损耗。下图是淘宝网设置的 DNS 预解析。</li> <li>preconnect。让浏览器在一个 HTTP 请求正式发给服务器前预先执行一些操作，这包括 DNS 解析、TLS 协商、TCP 握手，通过消除往返延迟来为用户节省时间。</li> <li>prefetch/preload。两个值都是让浏览器预先下载并缓存某个资源，但不同的是，prefetch 可能会在浏览器忙时被忽略，而 preload 则是一定会被预先下载。</li> <li>prerender。浏览器不仅会加载资源，还会解析执行页面，进行预渲染。</li></ul> <p>注：chrome实测发现，preload、prerender并不一定有效，这是因为浏览器对该标签属性的执行，是根据实际情况判断的。</p> <p><img src="https://gitee.com/jerry-zhang/image-database/raw/master/img/Ciqc1F647j-AFiBtAABWh7ld3uA965.png" alt=""></p></li></ol></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最后更新时间:</span> <span class="time">6/3/2021, 8:02:18 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/docs/technology/1. 前端/1.9 实践及总结/上传与下载.html" class="prev">
        上传与下载
      </a></span> <span class="next"><a href="/docs/technology/1. 前端/1.9 实践及总结/实时刷新实现方案.html">
        实时刷新实现方案
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/docs/assets/js/app.574fc7ba.js" defer></script><script src="/docs/assets/js/2.438c9cc2.js" defer></script><script src="/docs/assets/js/73.2d73f227.js" defer></script>
  </body>
</html>
