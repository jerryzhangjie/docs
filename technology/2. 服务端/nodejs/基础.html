<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>能量蓄水池</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/docs/favicon.svg">
    <meta name="description" content="学习笔记、知识文档、经验总结、生活杂记。">
    
    <link rel="preload" href="/docs/assets/css/0.styles.767e998a.css" as="style"><link rel="preload" href="/docs/assets/js/app.574fc7ba.js" as="script"><link rel="preload" href="/docs/assets/js/2.438c9cc2.js" as="script"><link rel="preload" href="/docs/assets/js/85.e4406d55.js" as="script"><link rel="prefetch" href="/docs/assets/js/10.782efd2f.js"><link rel="prefetch" href="/docs/assets/js/11.9a017d0a.js"><link rel="prefetch" href="/docs/assets/js/12.8c3fe05c.js"><link rel="prefetch" href="/docs/assets/js/13.32b8501e.js"><link rel="prefetch" href="/docs/assets/js/14.7cbead99.js"><link rel="prefetch" href="/docs/assets/js/15.5ca6d375.js"><link rel="prefetch" href="/docs/assets/js/16.7b1d893e.js"><link rel="prefetch" href="/docs/assets/js/17.8243e47c.js"><link rel="prefetch" href="/docs/assets/js/18.f795c9b4.js"><link rel="prefetch" href="/docs/assets/js/19.e16fd372.js"><link rel="prefetch" href="/docs/assets/js/20.12825b32.js"><link rel="prefetch" href="/docs/assets/js/21.d2e3ba19.js"><link rel="prefetch" href="/docs/assets/js/22.a091a3f3.js"><link rel="prefetch" href="/docs/assets/js/23.1829b4d2.js"><link rel="prefetch" href="/docs/assets/js/24.41ea6154.js"><link rel="prefetch" href="/docs/assets/js/25.d944d918.js"><link rel="prefetch" href="/docs/assets/js/26.f9ba23ac.js"><link rel="prefetch" href="/docs/assets/js/27.33228142.js"><link rel="prefetch" href="/docs/assets/js/28.cc4b94e6.js"><link rel="prefetch" href="/docs/assets/js/29.e183b477.js"><link rel="prefetch" href="/docs/assets/js/3.ce6400d4.js"><link rel="prefetch" href="/docs/assets/js/30.f2b86e7a.js"><link rel="prefetch" href="/docs/assets/js/31.75faa4ac.js"><link rel="prefetch" href="/docs/assets/js/32.1813d3da.js"><link rel="prefetch" href="/docs/assets/js/33.c64ac273.js"><link rel="prefetch" href="/docs/assets/js/34.d54f07d6.js"><link rel="prefetch" href="/docs/assets/js/35.c6b17c27.js"><link rel="prefetch" href="/docs/assets/js/36.93273509.js"><link rel="prefetch" href="/docs/assets/js/37.f4f46233.js"><link rel="prefetch" href="/docs/assets/js/38.fa9900ec.js"><link rel="prefetch" href="/docs/assets/js/39.3b24b23d.js"><link rel="prefetch" href="/docs/assets/js/4.9b8751d4.js"><link rel="prefetch" href="/docs/assets/js/40.5728cc60.js"><link rel="prefetch" href="/docs/assets/js/41.9e47e643.js"><link rel="prefetch" href="/docs/assets/js/42.2cd430a0.js"><link rel="prefetch" href="/docs/assets/js/43.0e9a4cd9.js"><link rel="prefetch" href="/docs/assets/js/44.ec5e25b6.js"><link rel="prefetch" href="/docs/assets/js/45.4cdd4bf1.js"><link rel="prefetch" href="/docs/assets/js/46.b8a5de46.js"><link rel="prefetch" href="/docs/assets/js/47.544a1352.js"><link rel="prefetch" href="/docs/assets/js/48.75ab366d.js"><link rel="prefetch" href="/docs/assets/js/49.59e58f04.js"><link rel="prefetch" href="/docs/assets/js/5.6d67c780.js"><link rel="prefetch" href="/docs/assets/js/50.96ea067f.js"><link rel="prefetch" href="/docs/assets/js/51.144bb382.js"><link rel="prefetch" href="/docs/assets/js/52.8d9aac06.js"><link rel="prefetch" href="/docs/assets/js/53.06e2c5d4.js"><link rel="prefetch" href="/docs/assets/js/54.2d17b229.js"><link rel="prefetch" href="/docs/assets/js/55.7cda8245.js"><link rel="prefetch" href="/docs/assets/js/56.133756ab.js"><link rel="prefetch" href="/docs/assets/js/57.74959c99.js"><link rel="prefetch" href="/docs/assets/js/58.18ff2b44.js"><link rel="prefetch" href="/docs/assets/js/59.b35de2b8.js"><link rel="prefetch" href="/docs/assets/js/6.c3ae577d.js"><link rel="prefetch" href="/docs/assets/js/60.39380f27.js"><link rel="prefetch" href="/docs/assets/js/61.48b5f2aa.js"><link rel="prefetch" href="/docs/assets/js/62.c62037f3.js"><link rel="prefetch" href="/docs/assets/js/63.a439b062.js"><link rel="prefetch" href="/docs/assets/js/64.c24f247a.js"><link rel="prefetch" href="/docs/assets/js/65.e1fa1286.js"><link rel="prefetch" href="/docs/assets/js/66.313ff872.js"><link rel="prefetch" href="/docs/assets/js/67.b8bfc1ca.js"><link rel="prefetch" href="/docs/assets/js/68.f81bf7a5.js"><link rel="prefetch" href="/docs/assets/js/69.c420ebd2.js"><link rel="prefetch" href="/docs/assets/js/7.5229be7a.js"><link rel="prefetch" href="/docs/assets/js/70.f4bec417.js"><link rel="prefetch" href="/docs/assets/js/71.40db7b8a.js"><link rel="prefetch" href="/docs/assets/js/72.f297dce6.js"><link rel="prefetch" href="/docs/assets/js/73.2d73f227.js"><link rel="prefetch" href="/docs/assets/js/74.735fb235.js"><link rel="prefetch" href="/docs/assets/js/75.50f07148.js"><link rel="prefetch" href="/docs/assets/js/76.89a73abf.js"><link rel="prefetch" href="/docs/assets/js/77.66ba0d1e.js"><link rel="prefetch" href="/docs/assets/js/78.81c41079.js"><link rel="prefetch" href="/docs/assets/js/79.14a4fcbf.js"><link rel="prefetch" href="/docs/assets/js/8.30d4ce7d.js"><link rel="prefetch" href="/docs/assets/js/80.af5d096b.js"><link rel="prefetch" href="/docs/assets/js/81.4eccd1c7.js"><link rel="prefetch" href="/docs/assets/js/82.d069817a.js"><link rel="prefetch" href="/docs/assets/js/83.495cd329.js"><link rel="prefetch" href="/docs/assets/js/84.9489494e.js"><link rel="prefetch" href="/docs/assets/js/86.71cff966.js"><link rel="prefetch" href="/docs/assets/js/87.5eba7956.js"><link rel="prefetch" href="/docs/assets/js/88.6670820c.js"><link rel="prefetch" href="/docs/assets/js/89.cc537610.js"><link rel="prefetch" href="/docs/assets/js/9.99b7e418.js"><link rel="prefetch" href="/docs/assets/js/90.6ccfe07d.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.767e998a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/docs/" class="home-link router-link-active"><img src="/docs/favicon.svg" alt="能量蓄水池" class="logo"> <span class="site-name can-hide">能量蓄水池</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/docs/about/" class="nav-link">
  关于
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术" class="dropdown-title"><span class="title">技术</span> <span class="arrow down"></span></button> <button type="button" aria-label="技术" class="mobile-dropdown-title"><span class="title">技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/technology/1. 前端/" class="nav-link">
  前端
</a></li><li class="dropdown-item"><!----> <a href="/docs/technology/2. 服务端/" class="nav-link">
  服务端
</a></li><li class="dropdown-item"><!----> <a href="/docs/technology/3. 其它/" class="nav-link">
  其它
</a></li></ul></div></div><div class="nav-item"><a href="/docs/life/" class="nav-link">
  生活杂记
</a></div><div class="nav-item"><a href="/docs/other/" class="nav-link">
  其它
</a></div> <a href="https://github.com/jerryzhangjie/docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/docs/about/" class="nav-link">
  关于
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术" class="dropdown-title"><span class="title">技术</span> <span class="arrow down"></span></button> <button type="button" aria-label="技术" class="mobile-dropdown-title"><span class="title">技术</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/docs/technology/1. 前端/" class="nav-link">
  前端
</a></li><li class="dropdown-item"><!----> <a href="/docs/technology/2. 服务端/" class="nav-link">
  服务端
</a></li><li class="dropdown-item"><!----> <a href="/docs/technology/3. 其它/" class="nav-link">
  其它
</a></li></ul></div></div><div class="nav-item"><a href="/docs/life/" class="nav-link">
  生活杂记
</a></div><div class="nav-item"><a href="/docs/other/" class="nav-link">
  其它
</a></div> <a href="https://github.com/jerryzhangjie/docs" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>nodejs</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/docs/technology/2. 服务端/nodejs/Nodejs开发仿知乎服务端深入理解RESTful API.html" class="sidebar-link">Nodejs开发仿知乎服务端深入理解RESTful API</a></li><li><a href="/docs/technology/2. 服务端/nodejs/基础.html" class="active sidebar-link">基础</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/technology/2. 服务端/nodejs/基础.html#什么是-node-js" class="sidebar-link">什么是 Node.js</a></li><li class="sidebar-sub-header"><a href="/docs/technology/2. 服务端/nodejs/基础.html#node-js-好在哪" class="sidebar-link">Node.js 好在哪</a></li><li class="sidebar-sub-header"><a href="/docs/technology/2. 服务端/nodejs/基础.html#node-js-可以用来做什么" class="sidebar-link">Node.js 可以用来做什么</a></li><li class="sidebar-sub-header"><a href="/docs/technology/2. 服务端/nodejs/基础.html#安装-3m安装法" class="sidebar-link">安装（3m安装法）</a></li><li class="sidebar-sub-header"><a href="/docs/technology/2. 服务端/nodejs/基础.html#node-js-基础" class="sidebar-link">Node.js 基础</a></li><li class="sidebar-sub-header"><a href="/docs/technology/2. 服务端/nodejs/基础.html#es6-知识点" class="sidebar-link">ES6+知识点</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p>开源与跨平台的 JavaScript 运行时环境</p> <p>运行于单个进程中，无需为每个请求创建新的线程</p> <p>异步I/O、非阻塞。执行 I/O 操作时（例如从网络读取、访问数据库或文件系统），Node.js 会在响应返回时恢复操作，而不是阻塞线程并浪费 CPU 循环等待。——&gt; 高并发</p> <h2 id="什么是-node-js"><a href="#什么是-node-js" class="header-anchor">#</a> 什么是 Node.js</h2> <h3 id="官方定义"><a href="#官方定义" class="header-anchor">#</a> 官方定义</h3> <ul><li>Node.js 是一个基于 <strong>Chrome V8 引擎</strong>的 JavaScript 运行环境。</li> <li>Node.js 使用了一个<strong>事件驱动</strong>、<strong>非阻式I/O</strong> 的模型，使其轻量且高效。</li></ul> <h3 id="node-js-中与-chrome-中写-js-有什么区别"><a href="#node-js-中与-chrome-中写-js-有什么区别" class="header-anchor">#</a> Node.js 中与 Chrome 中写 JS 有什么区别</h3> <ul><li>Node.js 没有浏览器 API，即 document、window 等</li> <li>加入了许多 Node.js API</li> <li>Chrome 中写 JS 控制浏览器，Node.js 中写 JS 控制整个计算机</li></ul> <h2 id="node-js-好在哪"><a href="#node-js-好在哪" class="header-anchor">#</a> Node.js 好在哪</h2> <h3 id="在处理高并发、i-o-密集场景性能优势明显"><a href="#在处理高并发、i-o-密集场景性能优势明显" class="header-anchor">#</a> 在处理高并发、I/O 密集场景性能优势明显</h3> <p>CPU 密集：压缩、解压、加密、解密、运算</p> <p>I/O 密集：文件操作、网络操作、数据库读写</p> <p>web 常见场景：</p> <ul><li>静态资源读取</li> <li>数据库操作</li> <li>渲染页面</li></ul> <p>高并发应对之道：</p> <ul><li>增加机器数</li> <li>增加每台机器的 CPU 数 —— 多核</li></ul> <p>Node.js 的单线程</p> <ul><li>单线程只是针对主进程，操作系统底层的多线程调度来完成 I/O</li> <li>单线程并不是单进程</li></ul> <h2 id="node-js-可以用来做什么"><a href="#node-js-可以用来做什么" class="header-anchor">#</a> Node.js 可以用来做什么</h2> <h3 id="现阶段应用领域"><a href="#现阶段应用领域" class="header-anchor">#</a> 现阶段应用领域</h3> <ul><li>web 服务中间层 - web server</li> <li>构建工作流 - 本地代码构建（属于cpu密集，从性能考虑并不适合node来做，但因为前端熟悉js）</li> <li>实用小工具开发 - 脚本工具、爬虫等</li> <li>客户端应用</li></ul> <h3 id="web-服务中间层"><a href="#web-服务中间层" class="header-anchor">#</a> web 服务中间层</h3> <h5 id="实例"><a href="#实例" class="header-anchor">#</a> 实例</h5> <p>腾讯视频</p> <h5 id="原因"><a href="#原因" class="header-anchor">#</a> 原因</h5> <ol><li>搜索引擎优化 + 首屏加速 = 服务端渲染</li> <li>服务端渲染 + 前后端同构 = Node.js</li></ol> <h3 id="构建工作流"><a href="#构建工作流" class="header-anchor">#</a> 构建工作流</h3> <h5 id="实例-2"><a href="#实例-2" class="header-anchor">#</a> 实例</h5> <ol><li>gulp</li> <li>webpack</li></ol> <h5 id="原因-2"><a href="#原因-2" class="header-anchor">#</a> 原因</h5> <ol><li>前端构建工具是为了构建前端代码 = 使用对象是前端开发</li> <li>功能需要扩展、问题需要修复 = 前端开发看得懂、能解决 = Node.js</li></ol> <h3 id="客户端应用"><a href="#客户端应用" class="header-anchor">#</a> 客户端应用</h3> <h5 id="实例-3"><a href="#实例-3" class="header-anchor">#</a> 实例</h5> <ol><li>VS Code</li> <li>游戏 - wayward</li></ol> <h5 id="原因-3"><a href="#原因-3" class="header-anchor">#</a> 原因</h5> <p>​	使用 Node.js 的客户端技术 Electron</p> <h2 id="安装-3m安装法"><a href="#安装-3m安装法" class="header-anchor">#</a> 安装（3m安装法）</h2> <h3 id="nvm-node-版本安装及管理工具"><a href="#nvm-node-版本安装及管理工具" class="header-anchor">#</a> nvm( node 版本安装及管理工具 )</h3> <ol><li><p>安装 nvm</p> <p><code>curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.37.1/install.sh | bash</code></p></li> <li><p>查看可安装node版本</p> <p><code>nvm ls-remote</code></p></li> <li><p>安装node</p> <p><code>nvm install 14.15.1</code></p> <p><code>nvm install 8</code></p></li> <li><p>查看本机已安装版本</p> <p><code>nvm ls</code></p></li> <li><p>切换版本</p> <p><code>nvm use 14.15.1</code></p></li> <li><p>指定默认版本</p> <p>切换到目标版本后	<code>nvm alias default node</code></p></li> <li><p>重新安装全局模块</p> <p>通过某个版本node自带的npm安装的全局模块，仅能在当前版本node环境使用，若要使node v14.15.1上安装的全局模块在其它node版本中共用，可执行</p> <p><code>nvm reinstall-packages 14.15.1</code></p></li></ol> <h3 id="npm-nodejs-包下载工具"><a href="#npm-nodejs-包下载工具" class="header-anchor">#</a> npm( nodejs 包下载工具)</h3> <ol><li><p>安装npm</p> <p>因为npm本身也是一个Node.js模块，所以可以通过 npm 来安装</p> <p><code>npm install -g npm@2.9</code></p></li> <li><p>常用选项</p> <p><code>无选项</code>	安装到 node_module ，但不保存到 package.json</p> <p><code>--global/-g</code>	安装到全局，如果是命令行模块，会直接链接到环境变量里</p> <p><code>--save/-S</code>	安装 node_module ，并保存在 package.json 里的 dependencies ，表示生产环境依赖的模块</p> <p><code>--save-dev/-D</code>	安装 node_module ，并保存在 package.json 里的 devDependencies ，表示开发环境依赖的模块</p></li></ol> <h3 id="nrm-npm-镜像源切换"><a href="#nrm-npm-镜像源切换" class="header-anchor">#</a> nrm( npm 镜像源切换)</h3> <ol><li><p>安装</p> <p><code>npm install -g nrm</code>	因为是命令行模块，所以需要全局安装</p></li> <li><p>查看源</p> <p><code>nrm ls</code>	npm、cnpm、yarn、taobao等</p></li> <li><p>测速</p> <p><code>nrm test</code></p></li> <li><p>切换源</p> <p><code>nrm use cnpm</code></p></li> <li><p>增加源</p> <p>为了保证开发效率，企业在内网部署一套私有 npm 源是非常有必要的。推荐使用 cnpm 部署私有源镜像服务器。</p> <p><code>nrm add 自定义指令名 企业镜像地址</code></p></li></ol> <h2 id="node-js-基础"><a href="#node-js-基础" class="header-anchor">#</a> Node.js 基础</h2> <h3 id="什么是技术预研"><a href="#什么是技术预研" class="header-anchor">#</a> 什么是技术预研</h3> <ul><li>分析要做的需求，找出技术难点</li> <li>针对每个技术难点进行攻克</li></ul> <h3 id="bff-层"><a href="#bff-层" class="header-anchor">#</a> BFF 层</h3> <blockquote><p>即 Backend For Frondend，就是前端和服务端之间的中间渲染层</p></blockquote> <ul><li>对用户侧提供 HTTP 服务</li> <li>使用后端 RPC(Romote Procedure Call远程过程调用) 服务</li></ul> <h3 id="模块-commonjs-规范"><a href="#模块-commonjs-规范" class="header-anchor">#</a> 模块：CommonJS 规范</h3> <h5 id="的问题"><a href="#的问题" class="header-anchor">#</a> <script></script> 的问题</h5> <ul><li>脚本变多时，需要手动管理加载顺序</li> <li>不同脚本之间逻辑调用，需要通过全局变量的方式</li> <li>没有 html 安放 script 怎么办？例如 nodejs 中就没有 html</li></ul> <h5 id="commonjs-模块规范"><a href="#commonjs-模块规范" class="header-anchor">#</a> CommonJS 模块规范</h5> <ul><li>每个文件是一个模块，有自己的作用域</li> <li>模块内部 module 变量代表模块本身</li> <li>module.exports 属性代表模块对外接口</li></ul> <p>待整理：规范、exports与module.exports、webpack打包出来的文件</p> <p>exports 是 module.exports 的快捷方式，common.js 中对外暴露的永远都是module.exports，而exports只是它的引用，所以不能直接给exports赋值，因为赋值会修改exports的指向，只能exports.xx = xx 这样挂载的方式使用。</p> <h5 id="require特性"><a href="#require特性" class="header-anchor">#</a> require特性</h5> <ul><li>module 被加载时执行，加载后缓存</li> <li>循环加载时，只输出已执行的部分，还未执行的部分不会输出</li></ul> <h3 id="global"><a href="#global" class="header-anchor">#</a> global</h3> <ul><li>commonjs</li> <li>buffer、process、console</li> <li>timer</li> <li>process.nextTick 放入当前事件队列的队尾，setImmediate 放入下一个队列的队首，setTimeout 介于两者之间</li></ul> <h3 id="path"><a href="#path" class="header-anchor">#</a> path</h3> <ul><li>__dirname、__filename 总是返回文件的绝对路径</li> <li>process.cwd() 总是返回执行 node 命令所在的文件夹</li></ul> <h3 id=""><a href="#" class="header-anchor">#</a> ./</h3> <ul><li>在 require 的参数中总是相对当前文件所在的文件夹</li> <li>在其它地方和 process.cwd() 一样，相对 node 启动文件夹</li></ul> <h3 id="buffer"><a href="#buffer" class="header-anchor">#</a> Buffer</h3> <ul><li>用来处理二进制数据流</li> <li>实例类似整数数组，大小固定，默认16进制表示</li> <li>利用C++代码在V8堆外分配物理内存</li></ul> <h3 id="内置模块"><a href="#内置模块" class="header-anchor">#</a> 内置模块</h3> <p>负责nodejs的应用层面到操作系统层面的通信，包括nodejs调用操作系统的能力或者说操作系统通知nodejs的能力。有了内置模块，nodejs就具有了强大的和操作系统交互的能力，从而可以做出服务端应用的能力。</p> <blockquote><p>TODO: 内置模块运行机制 极客时间《Node.js开发实战》12-Node.js内置模块</p></blockquote> <h3 id="异步-非阻塞i-o"><a href="#异步-非阻塞i-o" class="header-anchor">#</a> 异步：非阻塞I/O</h3> <p>I/O 即 Input/Output，一个系统的输入和输出</p> <p>阻塞 I/O 和非阻塞 I/O 的区别就在于<strong>系统接收输入再到输出期间，能不能接收其它输入</strong>。</p> <p>nodejs 线程通过事件循环调度其它 C++ 线程来异步处理任务，实现了整个 nodejs 的非阻塞 I/O。</p> <h3 id="异步-异步编程之-callback"><a href="#异步-异步编程之-callback" class="header-anchor">#</a> 异步：异步编程之 callback</h3> <p>回调函数规范：error-first callback，即第一个参数是error，后面的参数才是结果。</p> <h5 id="异步流程控制"><a href="#异步流程控制" class="header-anchor">#</a> 异步流程控制</h5> <p>常见恶心场景：</p> <ol><li>回调地狱；</li> <li>并行执行</li></ol> <h3 id="事件循环"><a href="#事件循环" class="header-anchor">#</a> 事件循环</h3> <p>代码模拟：</p> <div class="language- extra-class"><pre class="language-text"><code>const eventloop = {
		queue: [],
		
		loop() {
				while (this.queue.length) {
						const callback = this.queue.shift()
						callback()
				}
				
				setTimeout(this.loop.bind(this), 50)
		},
		
		add(callback) {
				this.queue.push(callback)
		}
}

eventloop.loop()

setTimeout(() =&gt; {
		eventloop.add(() =&gt; {
				console.log(1)
		})
}, 500)

setTimeout(() =&gt; {
		eventloop.add(() =&gt; {
				console.log(2)
		})
}, 800)
</code></pre></div><h3 id="异步-异步编程之promise"><a href="#异步-异步编程之promise" class="header-anchor">#</a> 异步：异步编程之Promise</h3> <p>当前的事件循环得不到的结果，但未来的事件循环会给到你结果。</p> <p>执行 then 和 catch 会返回一个新的 Promise，该 Promise 最终状态根据 then 和 catch 的回调函数的执行结果决定：</p> <ul><li>如果回调函数最终是 throw，该 Promise 是 rejected 状态</li> <li>如果回调函数最终是 return，该 Promise 是 resolved 状态</li> <li>如果回调函数最终 return 了一个 Promise，该 Promise 会和回调函数 return 的 Promise 状态保持一致</li></ul> <h3 id="异步-异步编程之async-await"><a href="#异步-异步编程之async-await" class="header-anchor">#</a> 异步：异步编程之async/await</h3> <ul><li>本质是 Promise 的语法糖</li> <li>异步编程的终极解决方案 - 以同步的方式写异步
<ul><li>await 关键字可以“暂停” async function 后边代码的执行</li> <li>await 关键字可以以同步的写法获取 Promise 的执行结果</li> <li>try-catch 可以获取 await 所得到的错误 - 一个穿越 事件循环而存在的 functio n</li></ul></li></ul> <h2 id="es6-知识点"><a href="#es6-知识点" class="header-anchor">#</a> ES6+知识点</h2> <h3 id="生成器-generator"><a href="#生成器-generator" class="header-anchor">#</a> 生成器 Generator</h3> <p>返回一个迭代器，每个迭代器都有 next 方法，用来获取每次迭代生成的对象</p> <p>node 模块 co 就是利用了 generator</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最后更新时间:</span> <span class="time">5/18/2021, 8:03:02 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/docs/technology/2. 服务端/nodejs/Nodejs开发仿知乎服务端深入理解RESTful API.html" class="prev">
        Nodejs开发仿知乎服务端深入理解RESTful API
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/docs/assets/js/app.574fc7ba.js" defer></script><script src="/docs/assets/js/2.438c9cc2.js" defer></script><script src="/docs/assets/js/85.e4406d55.js" defer></script>
  </body>
</html>
