(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{404:function(t,v,_){"use strict";_.r(v);var d=_(44),a=Object(d.a)({},(function(){var t=this,v=t.$createElement,_=t._self._c||v;return _("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[_("h2",{attrs:{id:"http缓存的分类"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#http缓存的分类"}},[t._v("#")]),t._v(" HTTP缓存的分类")]),t._v(" "),_("p",[t._v("分为强制缓存（也称强缓存）和协商缓存。强缓存，在缓存失效时间之前，都不会再向服务端请求数据；协商缓存，每次请求都需要进行比较判断是否可以使用缓存。"),_("br"),t._v("\n两种缓存规则可以同时存在，但强缓存优先级高于协商缓存，即有强缓存机制时，协商缓存机制将失效。")]),t._v(" "),_("h2",{attrs:{id:"强缓存"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#强缓存"}},[t._v("#")]),t._v(" 强缓存")]),t._v(" "),_("p",[t._v("相关头字段按优先级排序：")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("字段")]),t._v(" "),_("th",[t._v("归属")]),t._v(" "),_("th",[t._v("常用值")]),t._v(" "),_("th",[t._v("含义")]),t._v(" "),_("th",[t._v("其它")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("Pragma")]),t._v(" "),_("td",[t._v("响应头")]),t._v(" "),_("td",[t._v("no-cache（可以使cache-control的设置失效）")]),t._v(" "),_("td",[t._v("不使用缓存，每次都向服务器请求")]),t._v(" "),_("td",[t._v("http1.0，不常用")])]),t._v(" "),_("tr",[_("td",[t._v("Cache-Control")]),t._v(" "),_("td",[t._v("请求/响应头")]),t._v(" "),_("td",[t._v("no-cache/max-age=10")]),t._v(" "),_("td",[t._v("控制缓存策略/设置缓存有效时间长度")]),t._v(" "),_("td",[t._v("http1.1")])]),t._v(" "),_("tr",[_("td",[t._v("Expires")]),t._v(" "),_("td",[t._v("请求/响应头")]),t._v(" "),_("td",[t._v("GMT格式时间")]),t._v(" "),_("td",[t._v("缓存过期时间截点(服务端时间，精确到1s)")]),t._v(" "),_("td",[t._v("http1.0")])])])]),t._v(" "),_("p",[t._v("缺点：缓存过期后，无论资源是否变化，都要重新发送；")]),t._v(" "),_("h2",{attrs:{id:"协商缓存"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#协商缓存"}},[t._v("#")]),t._v(" 协商缓存")]),t._v(" "),_("p",[t._v("相关头字段：")]),t._v(" "),_("table",[_("thead",[_("tr",[_("th",[t._v("字段")]),t._v(" "),_("th",[t._v("归属")]),t._v(" "),_("th",[t._v("常用值")]),t._v(" "),_("th",[t._v("含义")]),t._v(" "),_("th",[t._v("其它")])])]),t._v(" "),_("tbody",[_("tr",[_("td",[t._v("Etag")]),t._v(" "),_("td",[t._v("响应头")]),t._v(" "),_("td",[t._v("资源内容的唯一标识（指纹机制）")]),t._v(" "),_("td",[t._v("资源内容不变，该标识就不变")]),t._v(" "),_("td",[t._v("对应请求头的 If-None-Match ，http1.1")])]),t._v(" "),_("tr",[_("td",[t._v("If-None-Match")]),t._v(" "),_("td",[t._v("请求头")]),t._v(" "),_("td",[t._v("Etag的值")]),t._v(" "),_("td",[t._v("用于服务端判断资源是否有变化")]),t._v(" "),_("td",[t._v("http1.1")])]),t._v(" "),_("tr",[_("td",[t._v("Last-Modified")]),t._v(" "),_("td",[t._v("响应头")]),t._v(" "),_("td",[t._v("GMT格式时间")]),t._v(" "),_("td",[t._v("最新资源变化时间")]),t._v(" "),_("td",[t._v("对应请求头的 If-Modified-Since  http1.0")])]),t._v(" "),_("tr",[_("td",[t._v("If-Modified-Since")]),t._v(" "),_("td",[t._v("请求头")]),t._v(" "),_("td",[t._v("Last-Modified的值")]),t._v(" "),_("td",[t._v("用于服务端判断资源是否有变化")]),t._v(" "),_("td",[t._v("http1.0")])])])]),t._v(" "),_("p",[t._v("注：Etag/If-None-Match 优先级高于 Last-Modified/If-Modified-Since")]),t._v(" "),_("p",[t._v("缺点：每次都要发送请求。")]),t._v(" "),_("h2",{attrs:{id:"最佳方案"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#最佳方案"}},[t._v("#")]),t._v(" 最佳方案")]),t._v(" "),_("p",[t._v("浏览器渲染页面过程中，先请求 html 文件，遇到 link、script再去加载 css、js 文件。")]),t._v(" "),_("p",[t._v("可以通过为 css、js 请求添加版本号或 MD5hash，来控制缓存，具体方案为：")]),t._v(" "),_("ol",[_("li",[t._v("html 文件，采用协商缓存(Etag)方式，每次渲染都发送请求，如果文件无变化则使用缓存；")]),t._v(" "),_("li",[t._v("css、js 采用强缓存方式，仅在版本号或 MD5hash变化时，才重新请求资源。")])])])}),[],!1,null,null,null);v.default=a.exports}}]);